fragment WorkspacePortConnection on SystemPort {
    connection {
        machine {
            ...ControlledMachine
        }
    }
}

fragment WorkspaceFull on Workspace {
    id
    portName
    state
    units
    error {
        ...AlertError
    }
    settings {
        ...WorkspaceFullSettings
    }
    port {
        ...WorkspacePortConnection
    }
}

query Workspace($workspaceId: String!) {
    workspace: getWorkspace(workspaceId: $workspaceId) {
        ...WorkspaceFull
    }
}

mutation CreateWorkspace($workspaceSettings: WorkspaceSettingsInput!) {
    workspace: createWorkspace(workspaceSettings: $workspaceSettings) {
        ...WorkspaceFull
    }
}

mutation DeleteWorkspace($workspaceId: String!) {
    workspace: deleteWorkspace(workspaceId: $workspaceId) {
        ...WorkspaceFull
    }
}

subscription WorkspaceChange {
    workspace: onWorkspaceChange {
        ...WorkspaceFull
    }
}

mutation OpenWorkspace($workspaceId: String!) {
    workspace: openWorkspace(workspaceId: $workspaceId) {
        ...WorkspaceFull
    }
}

mutation CloseWorkspace($workspaceId: String!) {
    workspace: closeWorkspace(workspaceId: $workspaceId) {
        ...WorkspaceFull
    }
}

mutation ChangeWorkspacePort($workspaceId: String!, $portName: String!) {
    workspace: changeWorkspacePort(workspaceId: $workspaceId, portName: $portName) {
        ...WorkspaceFull
    }
}
