
fragment MachineBuffer on MachineBuffer {
    lineNumber
    availableReceive
    availableSend
    writeQueueLength
    responseQueueLength
    lastInstructionResult {
        ...MachineInstructionResult
    }
    pendingInstructionResults {
        ...MachineInstructionResult
    }
}


fragment ApplicatorState on MachineApplicatorState {
    isOn
    toolId {
        id
        title
        value
        data
        hasBeenRead
    }
    spinDirection {
        id
        title
        value
        data
        hasBeenRead
    }
    spinSpeed {
        id
        title
        value
        data
        hasBeenRead
    }
    feedRate {
        id
        title
        value
        data
        hasBeenRead
    }
    lengthOffset {
        ...MachinePosition
    }
    lengthOffsetFactorType {
        id
        title
        value
        data
        hasBeenRead
        options { code value }
    }
    radiusCompensation {
        id
        title
        value
        data
        hasBeenRead
        options { code value }
    }
    probePosition {
        ...MachinePosition
    }
    coolant {
        id
        title
        value
        data
        hasBeenRead
        options { code value }
    }
}

fragment MachineOverrides on MachineOverrides {
    feed {
        id
        title
        value
        data
        hasBeenRead
    }
    mode {
        id
        title
        value
        data
        hasBeenRead
        options { code value }
    }
    rapids {
        id
        title
        value
        data
        hasBeenRead
    }
    speed {
        id
        title
        value
        data
        hasBeenRead
    }
}

fragment MachineStatus on MachineStatus {
    activityState
    machinePosition {
        ...MachinePosition
    }
    workPosition {
        ...MachinePosition
    }
    workCoordinateOffset {
        ...MachinePosition
    }
    alarm {
        ...MachineAlert
    }
    buffer {
        ...MachineBuffer
    }
    activePins
    applicator {
        ...ApplicatorState
    }
    overrides {
        ...MachineOverrides
    }
}

subscription MachineStatus($portName: String!) {
    machine: onMachineStatus(portName: $portName) {
        topicId
        status {
            ...MachineStatus
        }
    }
}
