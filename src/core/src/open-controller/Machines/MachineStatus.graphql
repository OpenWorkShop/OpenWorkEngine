
fragment MachineBuffer on MachineBuffer {
    lineNumber
    availableReceive
    availableSend
    writeQueueLength
    responseQueueLength
    lastInstructionResult {
        ...MachineInstructionResult
    }
    pendingInstructionResults {
        ...MachineInstructionResult
    }
}


fragment ApplicatorState on MachineApplicatorState {
    isOn
    toolId
    spinDirection
    spinSpeed
    feedRate
    lengthOffset {
        ...MachinePosition
    }
    lengthOffsetFactorType
    radiusCompensation
    probePosition {
        ...MachinePosition
    }
    isFloodCoolantEnabled
    isMistCoolantEnabled
}

fragment MachineOverrides on MachineOverrides {
    feed
    feedAllowed
    rapids
    speed
    speedAllowed
}

fragment MachineStatus on MachineStatus {
    activityState
    machinePosition {
        ...MachinePosition
    }
    workPosition {
        ...MachinePosition
    }
    workCoordinateOffset {
        ...MachinePosition
    }
    alarm {
        ...MachineAlert
    }
    buffer {
        ...MachineBuffer
    }
    activePins
    applicator {
        ...ApplicatorState
    }
    overrides {
        ...MachineOverrides
    }
}

subscription MachineStatus($portName: String!) {
    machine: onMachineStatus(portName: $portName) {
        topicId
        status {
            ...MachineStatus
        }
    }
}
