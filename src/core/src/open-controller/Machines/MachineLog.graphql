
fragment MachineLogEntryConnection on MachineLogEntryConnection {
    edges {
        cursor
        node {
            ...MachineLogEntry
        }
    }
    nodes {
        ...MachineLogEntry
    }
    pageInfo {
        ...PageInfo
    }
}

fragment PageInfo on PageInfo {
    endCursor
    hasNextPage
}

fragment MachineLogEntry on MachineLogEntry {
    id
    timestamp
    count
    message
    logLevel
    source
    writeState
    error {
        ...MachineAlert
    }
    code {
        ...SyntaxChunk
    }
}

fragment MachineLogs on ControlledMachine {
    logs(first: 50, order: { timestamp: DESC }) {
        ...MachineLogEntryConnection
    }
}

subscription MachineLogs($portName: String!) {
    machine: onMachineLog(portName: $portName) {
        topicId
        ...MachineLogs
    }
}