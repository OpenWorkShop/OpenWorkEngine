fragment SyntaxChunk on SyntaxChunk {
    value
    comment
    type
    # comments, isCode, isValid
}

fragment MachineExecutionResult on MachineExecutionResult {
    logs {
        ...MachineLogEntry
    }
    machine {
        ...ControlledMachine
    }
}


# -- commands

mutation CommandMachine($workspaceId: String!, $code: String!, $source: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: writeCommand(commandCode: $code, sourceName: $source) { ...MachineExecutionResult }
    }
}

mutation UnlockMachine($workspaceId: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: unlock { ...MachineExecutionResult }
    }
}

mutation ResetMachine($workspaceId: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: reset { ...MachineExecutionResult }
    }
}

mutation MoveMachine($workspaceId: String!, $moveCommand: MoveCommandInput!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: move(moveCommand: $moveCommand) { ...MachineExecutionResult }
    }
}
