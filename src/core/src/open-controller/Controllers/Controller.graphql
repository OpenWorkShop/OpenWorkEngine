fragment SyntaxChunk on SyntaxChunk {
    value
    comment
    type
    # comments, isCode, isValid
}

fragment MachineInstructionResult on MachineInstructionResult {
    # instruction {  }
    writeLogEntry { ...MachineLogEntry }
    responseLogEntry { ...MachineLogEntry }
}

fragment MachineExecutionResult on MachineExecutionResult {
    instructionResults {
        ...MachineInstructionResult
    }
    machine {
        ...ControlledMachine
    }
}


# -- commands

mutation SetFirmwareSettings($workspaceId: String!, $changeSet: [FirmwareSettingChangeInput!]!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        results: setFirmwareSettings(settingChanges: $changeSet) { ...MachineExecutionResult }
    }
}

mutation CommandMachine($workspaceId: String!, $code: String!, $source: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: writeCommand(commandCode: $code, sourceName: $source) { ...MachineExecutionResult }
    }
}

mutation UnlockMachine($workspaceId: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: unlock { ...MachineExecutionResult }
    }
}

mutation ResetMachine($workspaceId: String!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: reset { ...MachineExecutionResult }
    }
}

mutation MoveMachine($workspaceId: String!, $moveCommand: MoveCommandInput!) {
    controller: controlMachine(workspaceId: $workspaceId) {
        id
        result: move(moveCommand: $moveCommand) { ...MachineExecutionResult }
    }
}
